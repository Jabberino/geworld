import { CountryData, TimelineEvent } from '../types/index';

const generateMetrics = (startValue: number, volatility: number) => {
  const metrics = [];
  let currentValue = startValue;
  for (let i = 0; i < 12; i++) {
    const date = `2025-${String(i + 1).padStart(2, '0')}`;
    const change = (Math.random() - 0.5) * volatility;
    currentValue = currentValue * (1 + change);
    metrics.push({
      date,
      spotRate: currentValue,
      spotRateDelta: change * 100,
      exportShare: 5 + Math.random() * 2,
    });
  }
  return metrics;
};

export const mockEvents: TimelineEvent[] = [
  {
    id: '9',
    date: '2025-01-18',
    countryCode: 'VN',
    headline: 'Tech Supply Chain Review',
    description: 'US Commerce Department begins review of Vietnamâ€™s semiconductor exports.',
    type: 'THREAT',
    severity: 3,
  },
  {
    id: '10',
    date: '2025-02-10',
    countryCode: 'TH',
    headline: 'Tariff Suspension Talks',
    description: 'Thailand negotiates temporary suspension of auto tariff increases.',
    type: 'RELIEF',
    severity: 2,
  },
  {
    id: '11',
    date: '2025-03-12',
    countryCode: 'TH',
    headline: 'US Warns on Labor Standards',
    description: 'Thailand faces scrutiny over labor practices in export industries.',
    type: 'COMMENTARY',
    severity: 2,
  },
  {
    id: '12',
    date: '2025-04-05',
    countryCode: 'PH',
    headline: 'BPO Outsourcing Scrutiny',
    description: 'US reviews tax incentives linked to Philippine outsourcing firms.',
    type: 'COMMENTARY',
    severity: 2,
  },
  {
    id: '13',
    date: '2025-04-20',
    countryCode: 'PH',
    headline: 'Cybersecurity Partnership Announced',
    description: 'New USâ€“PH collaborative cybersecurity framework initiated.',
    type: 'RELIEF',
    severity: 1,
  },
  {
    id: '14',
    date: '2025-05-08',
    countryCode: 'PH',
    headline: 'Defense Procurement Questions',
    description: 'US lawmakers seek clarification on PH defense spending transparency.',
    type: 'COMMENTARY',
    severity: 3,
  },
  {
    id: '15',
    date: '2025-05-25',
    countryCode: 'ID',
    headline: 'US Delegation Visits Jakarta',
    description: 'Trade envoys explore cooperation on nickel supply chain.',
    type: 'COMMENTARY',
    severity: 2,
  },
  {
    id: '16',
    date: '2025-06-12',
    countryCode: 'ID',
    headline: 'Nickel Export Duty Considered',
    description: 'US signals potential tariff on processed nickel from Indonesia.',
    type: 'THREAT',
    severity: 4,
  },
  {
    id: '17',
    date: '2025-06-20',
    countryCode: 'MY',
    headline: 'Palm Oil Import Restrictions',
    description: 'Environmental concerns lead to possible US limits on palm oil.',
    type: 'THREAT',
    severity: 4,
  },
  {
    id: '18',
    date: '2025-07-03',
    countryCode: 'MY',
    headline: 'Malaysia Requests Clarification',
    description: 'Government seeks details on US environmental compliance rules.',
    type: 'RELIEF',
    severity: 1,
  },
  {
    id: '19',
    date: '2025-07-15',
    countryCode: 'SG',
    headline: 'Digital Trade Agreement Update',
    description: 'US and Singapore advance discussions on data flow protections.',
    type: 'RELIEF',
    severity: 1,
  },
  {
    id: '20',
    date: '2025-08-01',
    countryCode: 'SG',
    headline: 'Money Laundering Crackdown Praise',
    description: 'US Treasury commends Singaporeâ€™s regulatory enforcement.',
    type: 'COMMENTARY',
    severity: 1,
  },
  {
    id: '21',
    date: '2025-08-18',
    countryCode: 'SG',
    headline: 'Financial Monitoring Framework',
    description: 'Singapore adopts new measures aligned with US financial oversight expectations.',
    type: 'COMMENTARY',
    severity: 2,
  },
  {
    id: '22',
    date: '2025-09-05',
    countryCode: 'LA',
    headline: 'Hydropower Export Concerns',
    description: 'US voices worries over Laosâ€™ regional power financing transparency.',
    type: 'THREAT',
    severity: 2,
  },
  {
    id: '23',
    date: '2025-09-20',
    countryCode: 'LA',
    headline: 'Infrastructure Loan Discussions',
    description: 'US considers supporting alternative infrastructure financing for Laos.',
    type: 'RELIEF',
    severity: 1,
  },
  {
    id: '24',
    date: '2025-10-02',
    countryCode: 'MM',
    headline: 'Stability Assessment Released',
    description: 'US releases updated risk assessment related to Myanmarâ€™s political climate.',
    type: 'COMMENTARY',
    severity: 3,
  },
  {
    id: '25',
    date: '2025-10-15',
    countryCode: 'MM',
    headline: 'Humanitarian Aid Talks',
    description: 'Discussions begin regarding targeted humanitarian support.',
    type: 'RELIEF',
    severity: 1,
  },
  {
    id: '26',
    date: '2025-11-05',
    countryCode: 'KH',
    headline: 'Garment Export Warning',
    description: 'US hints at stricter reviews on Cambodian garment exports over labor compliance.',
    type: 'THREAT',
    severity: 3,
  },
  {
    id: '27',
    date: '2025-11-18',
    countryCode: 'KH',
    headline: 'Trade Compliance Cooperation',
    description: 'Cambodia agrees to implement new transparency measures.',
    type: 'RELIEF',
    severity: 1,
  },
  {
    id: '28',
    date: '2025-12-10',
    countryCode: 'BN',
    headline: 'Petrochemical Trade Note',
    description: 'US comments positively on Bruneiâ€™s environmental monitoring progress.',
    type: 'COMMENTARY',
    severity: 1,
  },

];

export const mockCountries: CountryData[] = [
  {
    code: 'VN',
    name: 'Vietnam',
    flag: 'ğŸ‡»ğŸ‡³',
    leader: 'To Lam',
    metrics: generateMetrics(25000, 0.05),
    events: mockEvents.filter((e) => e.countryCode === 'VN'),
    trumpSensitivityScore: 8.5,
    topExport: 'Electronics & Textiles',
    usTradeDeficit: 15,
    lat: 14.0583,
    lng: 108.2772,
  },
  {
    code: 'TH',
    name: 'Thailand',
    flag: 'ğŸ‡¹ğŸ‡­',
    leader: 'Paetongtarn Shinawatra',
    metrics: generateMetrics(35, 0.03),
    events: mockEvents.filter((e) => e.countryCode === 'TH'),
    trumpSensitivityScore: 6.2,
    topExport: 'Automotive Parts',
    usTradeDeficit: 8,
    lat: 15.8700,
    lng: 100.9925,
  },
  {
    code: 'ID',
    name: 'Indonesia',
    flag: 'ğŸ‡®ğŸ‡©',
    leader: 'Prabowo Subianto',
    metrics: generateMetrics(16000, 0.04),
    events: mockEvents.filter((e) => e.countryCode === 'ID'),
    trumpSensitivityScore: 5.5,
    topExport: 'Coal & Palm Oil',
    usTradeDeficit: 4,
    lat: -0.7893,
    lng: 113.9213,
  },
  {
    code: 'MY',
    name: 'Malaysia',
    flag: 'ğŸ‡²ğŸ‡¾',
    leader: 'Anwar Ibrahim',
    metrics: generateMetrics(4.5, 0.03),
    events: mockEvents.filter((e) => e.countryCode === 'MY'),
    trumpSensitivityScore: 6.8,
    topExport: 'Semiconductors',
    usTradeDeficit: 6,
    lat: 4.2105,
    lng: 101.9758,
  },
  {
    code: 'PH',
    name: 'Philippines',
    flag: 'ğŸ‡µğŸ‡­',
    leader: 'Bongbong Marcos',
    metrics: generateMetrics(56, 0.02),
    events: mockEvents.filter((e) => e.countryCode === 'PH'),
    trumpSensitivityScore: 4.2,
    topExport: 'Electronics',
    usTradeDeficit: 2,
    lat: 12.8797,
    lng: 121.7740,
  },
  {
    code: 'SG',
    name: 'Singapore',
    flag: 'ğŸ‡¸ğŸ‡¬',
    leader: 'Lawrence Wong',
    metrics: generateMetrics(1.35, 0.01),
    events: mockEvents.filter((e) => e.countryCode === 'SG'),
    trumpSensitivityScore: 3.0,
    topExport: 'Refined Petroleum',
    usTradeDeficit: -5, // Surplus
    lat: 1.3521,
    lng: 103.8198,
  },
  {
    code: 'BN',
    name: 'Brunei',
    flag: 'ğŸ‡§ğŸ‡³',
    leader: 'Hassanal Bolkiah',
    metrics: generateMetrics(1.3, 0.01),
    events: [],
    trumpSensitivityScore: 2.5,
    topExport: 'Crude Petroleum',
    usTradeDeficit: 0.5,
    lat: 4.5353,
    lng: 114.7277,
  },
  {
    code: 'KH',
    name: 'Cambodia',
    flag: 'ğŸ‡°ğŸ‡­',
    leader: 'Hun Manet',
    metrics: generateMetrics(25, 0.04),
    events: [],
    trumpSensitivityScore: 5.0,
    topExport: 'Textiles',
    usTradeDeficit: 3,
    lat: 12.5657,
    lng: 104.9910,
  },
  {
    code: 'LA',
    name: 'Laos',
    flag: 'ğŸ‡±ğŸ‡¦',
    leader: 'Thongloun Sisoulith',
    metrics: generateMetrics(18, 0.03),
    events: [],
    trumpSensitivityScore: 4.0,
    topExport: 'Electricity',
    usTradeDeficit: 0.2,
    lat: 19.8563,
    lng: 102.4955,
  },
  {
    code: 'MM',
    name: 'Myanmar',
    flag: 'ğŸ‡²ğŸ‡²',
    leader: 'Min Aung Hlaing',
    metrics: generateMetrics(12, 0.06),
    events: [],
    trumpSensitivityScore: 7.0,
    topExport: 'Natural Gas',
    usTradeDeficit: 0.1,
    lat: 21.9162,
    lng: 95.9560,
  },
];

export const generateCountry = (code: string, name: string, lat: number, lng: number): CountryData => {
  // Check if we already have a predefined one
  const existing = mockCountries.find(c => c.code === code);
  if (existing) return existing;

  // Otherwise generate random
  const volatility = 0.01 + Math.random() * 0.05;
  const startRate = 1 + Math.random() * 100;

  return {
    code,
    name,
    flag: 'ğŸ³ï¸', // Generic flag
    leader: 'Head of State',
    metrics: generateMetrics(startRate, volatility),
    events: [],
    trumpSensitivityScore: Math.floor(Math.random() * 10), // 0-9
    topExport: 'General Goods',
    usTradeDeficit: Math.floor((Math.random() * 20) - 10),
    lat,
    lng,
  };
};
